<!-- shop.html -->
{% extends 'baselogin.html' %}
{% block title %}Shop{% endblock %}

{% block content %}
<h2>Shop</h2>

<!-- Filter Buttons -->
<div class="filter-buttons">
  <a href="{{ url_for('views.shop') }}" class="btn {% if not selected %}btn-danger{% else %}btn-outline-danger{% endif %}">All</a>
  {% for cat in categories %}
    <a href="{{ url_for('views.shop', category=cat) }}" 
       class="btn {% if selected == cat %}btn-danger{% else %}btn-outline-danger{% endif %}">
      {{ cat }}
    </a>
  {% endfor %}
</div>
<hr>

{% if items|length == 0 %}
  <p>No items available.</p>
{% else %}
  {% for item in items %}
    <div>
      {% if item.product_picture %}
        <img src="{{ url_for('admin.get_image', filename=item.product_picture) }}" width="120" height="120">
      {% endif %}
      <h3>{{ item.product_name }}</h3>
      <p><strong>Category:</strong> {{ item.category }}</p>
      {% if item.in_stock|int > 0 %}
        <p>In stock ({{ item.in_stock }})</p>
        <form method="POST" action="{{ url_for('cart.add_item', product_id=item.id) }}">
          {{ csrf_token() if csrf_token is defined }}
          <input type="hidden" name="quantity" value="1">
          <button type="submit">Add to Cart</button>
        </form>
      {% else %}
        <p>Out of stock</p>
      {% endif %}
    </div>
    <hr>
  {% endfor %}
{% endif %}
{% endblock %}

